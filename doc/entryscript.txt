Configuration entry script
==========================

Updater requires single input script for its configuration. In default (if no
script is provided) it uses built in implementation. This document describes
behaviour of that built in script.

Please read updater's language documentation before reading this.

Included scripts
----------------

Entry script includes scripts from multiple places. We don't specify exact path to
these scripts as those are implementation details and depends on system
configuration. Names specified here are script names (see language documentation
for more info). They are executed in same order as they are introduced here.

base::
  This is basic script containing Turris OS repositories and minimal set of
  packages for router functionality. It's executed with remote security setting.
userlist-*::
  This is set of scripts that user can add in uci (`updater.pkglists.lists`). They
  are used by graphical user interface to add large sets of packages to system.
  These scripts are executed with remote security level.
auto-src::
  This is script on router in path `/etc/updater/auto.lua`. It's intended to be
  automatically manipulated using scripts. Currently mostly notably used by opkg
  wrapper script. This script is executed with local security level.
user-src::
  This is script on router in path `/etc/updater/user.lua`. It's intended for
  user's configuration. This script is executed with local security level.
conf.d-*::
  These are all lua scripts from `/etc/updater/conf.d`. Name of those files have
  to have `.lua` suffix. This is handy directory where you can place script
  distributed on router in packages. Example of this can be additional repository.
  This script is executed with local security level.

Exported variables
------------------

l10n::
  Table with requested languages from uci configuration (`updater.l10n.langs`).

Exported functions
------------------

for_l10n::
  Function for automatic `Install` commands generation based on languages. It
  accepts single argument, string that is name of the package. It appends short
  language name and passes it to `Install` command. This is done for every
  language in `l10n` table.

Added repositories
------------------

All repositories configured in `/etc/opkg/customfeeds.conf` are automatically
added. Expected format is `src/gz NAME URL`.
